* [ex2-104] Сбор жалоб на новости, на AJAX

*Подробное описание задачи смотреть в материалах: [примеры заданий (pdf)](../pubinfo/Ex2AllType.pdf)*

## Общие требования 

* Реализовать дополнительный функционал компонента «Пожаловаться на новость», который позволит собирать мнение посетителей сайта о размещенных новостях.

* Этот функционал должен работать как в AJAX режиме, так и нет. Имеется ввиду не типовой AJAX режим всего компонента, в реализация именно этого функционала.

## Решение

1) Подготовительные работы. Настройка в админке:

    * Создаем ИБ «Жалобы на новости» со свойствами:
        * Пользователь (строка, код - USER_CODE);
        * Новость (привязка к элементам (Новости), код - NEWS_CODE).
    
    * Создаем элемент ИБ «Жалобы на новости», например:
        * Название - Жалоба 1;
        * Начало активности – текущая дата/время;
        * Новость – любая
        * Пользователь – любой.
    
    * Настроить отображение списка инфоблока в административном разделе, отображать колонки:
        * ID, Начало активности, Пользователь, Новость.
  
2) Если нет шаблона в local, на странице /news/ копируем шаблон компонента "news", переименовываем в "ex2-104" для удобства, либо реализовываем в существующем:
    * Текущий шаблон компонента: .default
    * Используется в шаблоне сайта: furniture_pale-blue (Фиксированный)
    * Удаляем папки с языками: /lang/en/ и /lang/ua/ 

3) Настройка параметров:
    * Добавляем опцию "REPORT_AJAX" в корневой .parameters.php, lang-файл, вызов компонента в index.php

4) В файл detail.php, в массив подключения компонента "bitrix:news.detail" добавим параметр вручную или в настройках:
    * "REPORT_AJAX" => $arParams['REPORT_AJAX']

5) Реализовываем логику. Пояснения и комментарии в коде:
    * news.detail/.default/component_epilog.php
    * news.detail/.default/template.php

## Полезные ссылки

* [Javascript-библиотеки Bitrix Framework](https://dev.1c-bitrix.ru/api_help/js_lib/introduction.php)
* [BX.ajax.loadJSON](https://dev.1c-bitrix.ru/api_help/js_lib/ajax/bx_ajax_loadjson.php)
* [ConvertTimeStamp](https://dev.1c-bitrix.ru/api_help/main/functions/date/converttimestamp.php)

____
* [Задания](tasks.md)
* [README.md](../../README.md)