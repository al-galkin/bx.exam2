# [ex2-34] Установить значение тега meta «specialdate» в компоненте news.list

*Подробное описание задачи смотреть в материалах https://academy.1c-bitrix.ru/certification/exams.php*

## Общие требования

* Расширить возможности типового компонента news.list. Компонент расположен по адресу /news/ и выводит информацию из инфоблока Новости.
* Создание нового компонента или подмена стандартного через local будет неверным решением, компонент должен остаться типовой. Нужно воспользоваться расширением его возможностей с помощью специальных файлов шаблона.
* Алгоритм решения, при котором будет использоваться некэшируемое обращение к базе данных - не будет верным.

## Решаемая задача

* В шаблон сайта, в файле header.php добавить тег ```<meta property="specialdate" content="">```, перед тегом title. Управление значением content для разделов сайта и статичных страниц должно быть доступно администратору сайта.

* Для всех страниц сайта по умолчанию значение тега установить равным «100».

* В настройки компонентов news и news.list добавить параметр в виде чек-бокса: «Установить свойство страницы specialdate». Значение параметра передавать из настроек комплексного компонента news в news.list на соответствующей странице комплексного компонента.

* Если параметр компонента «Установить свойство страницы specialdate» активен, то:
    * Определить дату новости, отображаемой первой на текущей странице
    * Полученный результат установить как значение тега

## Решение

* Т.к. задание 1-е: копируем сначала шаблон "furniture_pale-blue"
* Добавляем свойство в "Управление структурой" через админку (Настройки > Настройки продукта > Настройки модулей > Управление структурой)
* Свойство корневого раздела устанавливаем: 100
* Добавляем тег в header.php + отображение свойства через CMain::ShowProperty
* Копируем шаблон комплексного компонента "news" (вместе с news.list и другими дочерними)
* Копируем файл из bitrix/components/bitrix/news/templates/.default/news.php и .parameters.php к себе в шаблон, + языковой /lang/ru/.parameters.php
* Добавляем свойство в параметры компонента .parameters.php для отображения в дополнительных настройках
* Добавляем "Установить свойство страницы specialdate" в lang-файл
* Добавляем в news.php наш параметр, чтобы он прокинулся в news.list
* Добавляем в news.list - 2 файла: result_modifier.php и component_epilog.php
* Отлавливаем значение и кэшируем в result_modifier.php
* Выводим значение в component_epilog.php (не кэшируется)

## Полезные ссылки

* https://dev.1c-bitrix.ru/api_help/main/reference/cmain/showproperty.php
* https://dev.1c-bitrix.ru/api_help/main/reference/cmain/setpageproperty.php
* https://dev.1c-bitrix.ru/api_help/main/reference/cbitrixcomponent/setresultcachekeys.php

* https://ro-man.su/blog/video_lessons/bitrix-exam-2/lesson-1/ (страница и видео на YouTube были удалены автором, смотреть локально)

____
* [Задания](tasks.md)
* [README.md](../../README.md)